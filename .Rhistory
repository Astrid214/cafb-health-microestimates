getwd()
getwd()
markdown?
dfkajda
??markdown
?markdown
library(httr)
library(jsonlite)
library(RCurl)
library(dplyr)
install.packages('httr')
install.packages(c('jsonlite','RCurl','dplyr'))
library(httr)
library(jsonlite)
library(RCurl)
library(dplyr)
install.packages('dplyr')
install.packages('jsonliate')
install.packages('jsonlite')
install.packages("jsonlite")
install.packages("RCurl")
library(Rcurl)
getURL
getURL()
install.packages('RCurl')
install.packages('devtools')
library(devtools)
library(httr)
library(jsonlite)
key = '3a6a31e5e9739d354bc99907b46aac3274304332'
test <- 'B02001_001E'
url <- paste0('http://api.census.gov/data/2014/acs5?get=NAME,',test,'&for=block+group:*&key=',key)
url
url <- paste0('http://api.census.gov/data/2014/acs5?get=NAME,',test,'&for=block+group:*&in=state:*&key=',key)
url
url <- paste0('http://api.census.gov/data/',2014,'/acs1?get=NAME,',test,'&for=metropolitan+statistical+area/micropolitan+statistical+area:*&key=',key)
url
url <- paste0('http://api.census.gov/data/2014/acs5?get=NAME,',table,'&for=block+group:*&in=state:',FIPS,*&key=',key)
url <- paste0('http://api.census.gov/data/2014/acs5?get=NAME,',table,'&for=block+group:*&in=state:',FIPS,'*&key=',key)
FIPS = c(11,24,51)
fips = c(11,24,51)
fips[1]
url <- paste0('http://api.census.gov/data/2014/acs5?get=NAME,',table,'&for=block+group:*&in=state:',fips[1],'*&key=',key)
url <- paste0('http://api.census.gov/data/2014/acs5?get=NAME,',table,'&for=block+group:*&in=state:',24,'*&key=',key)
table
table
table
table = 'B02001_001'
url <- paste0('http://api.census.gov/data/2014/acs5?get=NAME,',table,'&for=block+group:*&in=state:',24,'*&key=',key)
url
url <- paste0('http://api.census.gov/data/2014/acs5?get=NAME,',table,'&for=tract:*&in=state:',24,'*&key=',key)
fdajkljfda
fajdkfljajda
'ajeklfjalk'
aj;eljakfea
jalkejfk;ajkfea
quit()
fips = c(11,24,51)
length(acsTables)
install.packages('RCurl')
install.packages("RCurl")
install.packages('RCurl')
library(RCurl)
library(httr)
install.packages('httr')
library(httr)
library(httr)
library(jsonlite)
library(RCurl)
key = '3a6a31e5e9739d354bc99907b46aac3274304332'
library(httr)
install.packages(httr)
install.packages('httr')
install.packages('devtools')
library(httr)
library(jsonlite)
library(RCurl)
library(dplyr)
list.dirs()
brfssRaw <- read.csv('brfss2014clean.csv', na.strings = "")
setwd("Data\\")
setwd("\\Data")
setwd("Data\\")
setwd("\\Data\\")
setwd("\\Data")
setwd("/Data")
setwd("//Data")
setwd("\\Data")
setwd("\Data")
list.files()
setwd("Data")
list.files()
setwd("Data\cafb-health-microestimates")
setwd("\cafb-health-microestimates")
setwd("cafb-health-microestimates")
list.files()
list.files()
brfssRaw <- read.csv('brfss2014clean.csv', na.strings = "")
brfss <- mutate(brfssRaw,
heart_attack = as.integer(heart_attack) - 1,
heart_disease = as.integer(heart_disease) - 1,
diabetes = as.integer(diabetes) - 1)
brfss <- filter(brfss,
!is.na(age),
!is.na(sex),
!is.na(income),
!is.na(race),
!is.na(diabetes),
!is.na(heart_disease),
!is.na(heart_attack),
!is.na(state))
brfss <- cbind(brfss, model.matrix(~ brfss$age - 1))
brfss <- cbind(brfss, model.matrix(~ brfss$sex - 1))
brfss <- cbind(brfss, model.matrix(~ brfss$race - 1))
brfss <- cbind(brfss, model.matrix(~ brfss$income - 1))
x <- names(brfss)
x <- gsub('brfss\\$','',x)
x <- gsub("-","_",x)
x <- gsub("<","less_than",x)
x <- gsub('>','greater_than',x)
x <- gsub('/','slash',x)
x <- gsub('\\+', 'plus',x)
x <- gsub(' ', '',x)
names(brfss) <- x
modelLogit <- glm(diabetes ~
#name
age18_24
+ age25_29
+ age30_34
+ age40_44
+ age50_54
+ age60_64
+ age70_74
+ income10k_15k
+ income20k_25k
+ income25k_35k
+ income35k_50k
+ sexfemale
+ racewhite
+ raceblack
+ racenativeamerican
+ raceasianslashpacificislander
+ raceotherslashmultiracial
, data = brfss)#, family = "binomial")
acs <- read.csv('acs_FARA_combined_counts.csv', stringsAsFactors=FALSE)
y <- names(acs)
y <- gsub("\\.","",y)
names(acs) <- y
State_FIPS <- c(11,51,24)
name <- c('Washington D.C.','Virginia','Maryland')
xwalk <- as.data.frame(cbind(State_FIPS,name))
xwalk$State_FIPS <- as.integer(xwalk$State_FIPS)
acs <- left_join(acs, xwalk, by='State_FIPS')
diabetesRiskScore <- as.data.frame(cbind(acs$CensusTract,predict(modelLogit,newdata=acs,na.omit=TRUE)))
head(diabetesRiskScore)
names(diabetesRiskScore) <- c('CensusTract','diabetesRiskScore')
write.csv(diabetesRiskScore,'diabetesRiskScore.csv')
